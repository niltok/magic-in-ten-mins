<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0">
<title>
ååˆ†é’Ÿé­”æ³•ç»ƒä¹ </title>
<style>
body { max-width: 650px; margin: auto; width: 90%; margin-top: 10%; margin-bottom: 10%; color: #0B0E26; background: #FAFAFC; line-height: 2em; font-variant-ligatures: common-ligatures discretionary-ligatures; -webkit-font-feature-settings: "liga" on, "calt" on; font-feature-settings: "liga" on, "calt" on; }
body { font-size: 20px; font-family: -apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif; }
h1 { font-size: 2.5em; color: #EF96AB; line-height: 1.5em; }
h2 { margin-top: 2em; line-height: 1.5em; }
blockquote { color: gray; margin: 0; padding: 1 1 1 20; border-left: 5px solid #EF96AB; }
code, pre { font-size: 0.9em; line-height: 1.8em; font-family: "JetBrains Mono","ç­‰è·æ›´çº±é»‘ä½“ SC","Fira Code",Menlo,Monaco,source-code-pro,Courier New,Consolas,monospace; background: #FCF6FC; border-radius: 3px; padding-inline: 0.3rem; }
pre { overflow-x: auto; padding: 1rem; }
pre>code { padding-inline: 0; }
a { color: #02AEF1; text-decoration: none; }
@media (prefers-color-scheme: dark) { body { color: #D8D8D6; background: #0E0E10; } }
@media (prefers-color-scheme: dark) { pre, code { color: #D8D8D6; background: #0E0F1F; } }
.hljs-keyword { color: #F288AF; }
.hljs-comment { color: #929CA6; }
.hljs-string { color: #0594A6; }
.hljs-title { color: #4581D9; }
.hljs-type, .hljs-built_in { color: #fca311; }
</style>
</head>
<body>
<p>
<a href="https://magic.huohuo.moe">ğŸ HomepageğŸ </a> | <a href="https://github.com/niltok/magic-in-ten-mins">â­Star me on GitHubâ­</a></p>
<h1 id="ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šy-ç»„åˆå­">ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šY ç»„åˆå­</h1>
<h3 id="by-ã€Œç©ç«ã€">By ã€Œç©ç«ã€</h3>
<blockquote>
<p>å‰ç½®æŠ€èƒ½ï¼šJava åŸºç¡€ï¼ŒÎ» æ¼”ç®—ï¼ŒÎ» æ¼”ç®—ç¼–ç </p>
</blockquote>
<h2 id="é€’å½’">é€’å½’</h2>
<p>åœ¨ Java é‡Œé¢å®ç°é€’å½’éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨å‡½æ•°å†…è°ƒç”¨å‡½æ•°æœ¬èº«å°±å¥½äº†ï¼Œæ¯”å¦‚ä¸‹é¢çš„æ±‚å’Œç¨‹åºï¼š</p>
<pre><code class="language-java"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>{
    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> n + sum(n - <span class="hljs-number">1</span>);
}
</code></pre>
<p>è¿™æ—¶å€™å°±ä¼šæ³¨æ„åˆ°çœ‹èµ·æ¥é€’å½’å¿…é¡»è¦å‡½æ•°æœ‰åå­—ï¼Œä¸ç„¶æ€ä¹ˆè°ƒç”¨æ—¶è¡¨ç¤ºè‡ªå·±å‘¢ï¼Ÿå®é™…ä¸Šæœ‰ä¸ªå¾ˆæ˜¾ç„¶çš„ä¾‹å­ï¼š</p>
<pre><code>(Î» <span class="hljs-keyword">x</span>. <span class="hljs-keyword">x</span> <span class="hljs-keyword">x</span>) (Î» <span class="hljs-keyword">x</span>. <span class="hljs-keyword">x</span> <span class="hljs-keyword">x</span>)
</code></pre>
<p>è¿™ä¸ªè¡¨è¾¾å¼æ— è®ºæ€ä¹ˆæ±‚å€¼éƒ½ä¼šå¾—åˆ°å®ƒè‡ªèº«ï¼Œå®é™…ä¸Šè¿™å°±æ˜¯ä¸ªæ— é™é€’å½’çš„ä¾‹å­ã€‚è€Œåœ¨å®ƒçš„åŸºç¡€ä¸Šç¨åŠ ä¿®æ”¹å°±å¯ä»¥å¾—åˆ° Y ç»„åˆå­ï¼ˆY Combinatorï¼‰ï¼š</p>
<pre><code>Y <span class="hljs-operator">=</span> Î» f. (Î» <span class="hljs-keyword">x</span>. f (<span class="hljs-keyword">x</span> <span class="hljs-keyword">x</span>)) (Î» <span class="hljs-keyword">x</span>. f (<span class="hljs-keyword">x</span> <span class="hljs-keyword">x</span>))
</code></pre>
<p>è€Œå¾€ Y ç»„åˆå­ä¸Šåº”ç”¨ä¸€ä¸ªå‡½æ•°å°±ä¼šå¾—åˆ°ï¼š</p>
<pre><code>Y g <span class="hljs-operator">=</span> (Î» <span class="hljs-keyword">x</span>. g (<span class="hljs-keyword">x</span> <span class="hljs-keyword">x</span>)) (Î» <span class="hljs-keyword">x</span>. g (<span class="hljs-keyword">x</span> <span class="hljs-keyword">x</span>))
    <span class="hljs-operator">=</span> g ((Î» <span class="hljs-keyword">x</span>. g (<span class="hljs-keyword">x</span> <span class="hljs-keyword">x</span>)) (Î» <span class="hljs-keyword">x</span>. g (<span class="hljs-keyword">x</span> <span class="hljs-keyword">x</span>)))
    <span class="hljs-operator">=</span> g (Y g)
</code></pre>
<p>è¿™æ · <code>g</code> å°±æ‹¿åˆ°äº† <code>Y g</code> ä¹Ÿå°±æ˜¯å®ƒè‡ªå·±çš„å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€’å½’äº†ï¼Œæ¯”å¦‚ä¸Šé¢çš„ <code>sum</code> å°±å¯ä»¥å†™æˆï¼š</p>
<pre><code><span class="hljs-built_in">sum</span>&#x27; = Î» self. Î» n.
    isZero <span class="hljs-built_in">n</span>
        <span class="hljs-built_in">n</span>
        (+ <span class="hljs-built_in">n</span> (self (prev <span class="hljs-built_in">n</span>)))
<span class="hljs-built_in">sum</span> = Y <span class="hljs-built_in">sum</span>&#x27;
</code></pre>
<p><code>n</code> æ˜¯ä¸ªä¸˜å¥‡æ•°ï¼Œ <code>isZero</code> åˆ¤æ–­æ•°å­—æ˜¯ä¸æ˜¯ 0 å¹¶å¾—åˆ°ä¸€ä¸ª Î» æ¼”ç®—ç¼–ç çš„å¸ƒå°”å€¼ï¼Œ <code>+</code> å‡½æ•°æŠŠä¸¤ä¸ªä¸˜å¥‡æ•°ç›¸åŠ ï¼Œ <code>prev</code> å‡½æ•°å¾—åˆ°æ¯” <code>n</code> å°ä¸€çš„æ•°ã€‚ <code>sum</code> åœ¨é€’å½’åˆ° <code>n</code> ä¸º 0 æ—¶åœæ­¢é€’å½’ã€‚</p>
<h2 id="æ±‚å€¼ç­–ç•¥">æ±‚å€¼ç­–ç•¥</h2>
<p>å¾ˆæ˜¾ç„¶å¦‚æœç›´æ¥ä½¿ç”¨ä¸¥æ ¼æ±‚å€¼ä¼šæ— é™å±•å¼€ Y ç®—å­è€Œå¾—ä¸åˆ°ç»“æœï¼Œå¦‚æœä½¿ç”¨æƒ°æ€§æ±‚å€¼ä¼šå¾—ä¸åˆ°æ˜“äºé˜…è¯»çš„ç»“æœã€‚è¿™æ—¶å€™å°±è¦ç”¨ä¸€ç§ä»‹äºä¸¤è€…ä¹‹é—´çš„æ±‚å€¼ç­–ç•¥ï¼š</p>
<pre><code class="language-java"><span class="hljs-comment">// class Fun</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> Expr <span class="hljs-title">fullReduce</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Fun(x, e.fullReduce());
}
<span class="hljs-comment">// class App</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> Expr <span class="hljs-title">fullReduce</span><span class="hljs-params">()</span> </span>{
    Expr fr = f.reduce();
    <span class="hljs-keyword">if</span> (fr <span class="hljs-keyword">instanceof</span> Fun) {
        Fun fun = (Fun) fr;
        <span class="hljs-keyword">return</span> fun.e.apply(fun.x, x).fullReduce();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> App(fr.fullReduce(), x.fullReduce());
}
</code></pre>
<p>å®ƒåªæœ‰åœ¨å°è¯•åº”ç”¨å‡½æ•°å¤±è´¥çš„æ—¶å€™æ‰ä¼šè¿›è¡Œå®Œå…¨å±•å¼€ï¼Œè¿™æ ·æ¯æ¬¡åªå±•å¼€ä¸€ç‚¹å°±å¯ä»¥é¿å…é™·å…¥æ— é™é€’å½’ã€‚</p>
<h2 id="å¾ªç¯">å¾ªç¯</h2>
<p>åœ¨ç¼–ç é‚£æœŸä¸­ä»‹ç»äº†å¦‚ä½•åœ¨ Î» æ¼”ç®—ä¸­æ„é€ åˆ†æ”¯ç»“æ„ï¼Œè€Œå¾ªç¯å¾ªç¯å¯ä»¥ç”¨é€’å½’æ¥è¡¨ç¤ºï¼Œæ¯ä¸ªå¾ªç¯éƒ½å¯ä»¥å†™æˆå¾ªç¯å˜é‡ä½œä¸ºå‚æ•°çš„å°¾é€’å½’å‡½æ•°ï¼Œå®é™…ä¸Šå¦‚ä¸‹çš„å¾ªç¯ï¼š</p>
<pre><code class="language-java">State state;
<span class="hljs-keyword">while</span> (needLoop(state)) {
    doSomething();
    state = update(state);
}
</code></pre>
<p>éƒ½å¯ä»¥å†™æˆå¦‚ä¸‹çš„é€’å½’å‡½æ•°ï¼š</p>
<pre><code class="language-java"><span class="hljs-function">State <span class="hljs-title">While</span><span class="hljs-params">(State state)</span> </span>{
    <span class="hljs-keyword">if</span> (needLoop(state)) 
        <span class="hljs-keyword">return</span> While(update(state));
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> state;
}
</code></pre>
<p>è¿™æ ·å°±å¯ä»¥æŠŠä»»æ„çš„å¾ªç¯æ”¹å†™æˆ Î» æ¼”ç®—çš„å½¢å¼äº†ã€‚</p>
</body>
</html>
