<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0">
<title>
ååˆ†é’Ÿé­”æ³•ç»ƒä¹ </title>
<style>
body { max-width: 650px; margin: auto; width: 90%; margin-top: 10%; margin-bottom: 10%; color: #0B0E26; background: #FAFAFC; line-height: 2em; font-variant-ligatures: common-ligatures discretionary-ligatures; -webkit-font-feature-settings: "liga" on, "calt" on; font-feature-settings: "liga" on, "calt" on; }
body { font-size: 20px; font-family: -apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif; }
h1 { font-size: 2.5em; color: #EF96AB; line-height: 1.5em; }
h2 { margin-top: 2em; line-height: 1.5em; }
blockquote { color: gray; margin: 0; padding: 1 1 1 20; border-left: 5px solid #EF96AB; }
code, pre { font-size: 0.9em; line-height: 1.8em; font-family: "JetBrains Mono","ç­‰è·æ›´çº±é»‘ä½“ SC","Fira Code",Menlo,Monaco,source-code-pro,Courier New,Consolas,monospace; background: #FCF6FC; border-radius: 3px; padding-inline: 0.3rem; }
pre { overflow-x: auto; padding: 1rem; }
pre>code { padding-inline: 0; }
a { color: #02AEF1; text-decoration: none; }
@media (prefers-color-scheme: dark) { body { color: #D8D8D6; background: #0E0E10; } }
@media (prefers-color-scheme: dark) { pre, code { color: #D8D8D6; background: #0E0F1F; } }
.hljs-keyword { color: #F288AF; }
.hljs-comment { color: #929CA6; }
.hljs-string { color: #0594A6; }
.hljs-title { color: #4581D9; }
.hljs-type, .hljs-built_in { color: #fca311; }
</style>
</head>
<body>
<p>
<a href="https://magic.huohuo.moe">ğŸ HomepageğŸ </a> | <a href="https://github.com/niltok/magic-in-ten-mins">â­Star me on GitHubâ­</a></p>
<h1 id="ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šä»£æ•°æ•°æ®ç±»å‹">ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šä»£æ•°æ•°æ®ç±»å‹</h1>
<h3 id="by-ã€Œç©ç«ã€">By ã€Œç©ç«ã€</h3>
<blockquote>
<p>å‰ç½®æŠ€èƒ½ï¼šJavaåŸºç¡€</p>
</blockquote>
<h2 id="ç§¯ç±»å‹ï¼ˆproduct-typeï¼‰">ç§¯ç±»å‹ï¼ˆProduct typeï¼‰</h2>
<p>ç§¯ç±»å‹æ˜¯æŒ‡åŒæ—¶åŒ…æ‹¬å¤šä¸ªå€¼çš„ç±»å‹ï¼Œæ¯”å¦‚ Java ä¸­çš„ class å°±ä¼šåŒ…æ‹¬å¤šä¸ªå­—æ®µï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>{
    String name;
    <span class="hljs-keyword">int</span> id;
}
</code></pre>
<p>è€Œä¸Šé¢è¿™æ®µä»£ç ä¸­ Student çš„ç±»å‹ä¸­æ—¢æœ‰ String ç±»å‹çš„å€¼ä¹Ÿæœ‰ int ç±»å‹çš„å€¼ï¼Œå¯ä»¥è¡¨ç¤ºä¸º String å’Œ int çš„ã€Œç§¯ã€ï¼Œå³ <code>String * int</code> ã€‚</p>
<h2 id="å’Œç±»å‹ï¼ˆsum-typeï¼‰">å’Œç±»å‹ï¼ˆSum typeï¼‰</h2>
<p>å’Œç±»å‹æ˜¯æŒ‡å¯ä»¥æ˜¯æŸä¸€äº›ç±»å‹ä¹‹ä¸€çš„ç±»å‹ï¼Œåœ¨ Java ä¸­å¯ä»¥ç”¨ç»§æ‰¿æ¥è¡¨ç¤ºï¼š</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">SchoolPerson</span> </span>{}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">SchoolPerson</span> </span>{
    String name;
    <span class="hljs-keyword">int</span> id;
}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Teacher</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">SchoolPerson</span> </span>{
    String name;
    String  office;
}
</code></pre>
<p>SchoolPerson å¯èƒ½æ˜¯ Student ä¹Ÿå¯èƒ½æ˜¯ Teacher ï¼Œå¯ä»¥è¡¨ç¤ºä¸º Student å’Œ Teacher çš„ã€Œå’Œã€ï¼Œå³ <code>String * int + String * String</code> ã€‚è€Œä½¿ç”¨æ—¶åªéœ€è¦ç”¨ <code>instanceof</code> å°±èƒ½çŸ¥é“å½“å‰çš„ StudentPerson å…·ä½“æ˜¯ Student è¿˜æ˜¯ Teacher ã€‚</p>
<h2 id="ä»£æ•°æ•°æ®ç±»å‹ï¼ˆadt-algebraic-data-typeï¼‰">ä»£æ•°æ•°æ®ç±»å‹ï¼ˆADT, Algebraic Data Typeï¼‰</h2>
<p>ç”±å’Œç±»å‹ä¸ç§¯ç±»å‹ç»„åˆæ„é€ å‡ºçš„ç±»å‹å°±æ˜¯ä»£æ•°æ•°æ®ç±»å‹ï¼Œå…¶ä¸­ä»£æ•°æŒ‡çš„å°±æ˜¯å’Œä¸ç§¯çš„æ“ä½œã€‚</p>
<p>åˆ©ç”¨å’Œç±»å‹çš„æšä¸¾ç‰¹æ€§ä¸ç§¯ç±»å‹çš„ç»„åˆç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ å‡º Java ä¸­æœ¬æ¥å¾ˆåŸºç¡€çš„åŸºç¡€ç±»å‹ï¼Œæ¯”å¦‚æšä¸¾å¸ƒå°”çš„ä¸¤ä¸ªé‡æ¥æ„é€ å¸ƒå°”ç±»å‹ï¼š</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Bool</span> </span>{}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">True</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Bool</span> </span>{}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">False</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Bool</span> </span>{}
</code></pre>
<p>ç„¶åç”¨ <code>t instanceof True</code> å°±å¯ä»¥ç”¨æ¥åˆ¤å®š t ä½œä¸º Bool çš„å€¼æ˜¯ä¸æ˜¯ True ã€‚</p>
<p>æ¯”å¦‚åˆ©ç”¨Sçš„æ•°é‡è¡¨ç¤ºçš„è‡ªç„¶æ•°ï¼š</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Nat</span> </span>{}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Z</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Nat</span> </span>{}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">S</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Nat</span> </span>{
    Nat value;
    
    S(Nat v) { value = v; }
}
</code></pre>
<p>è¿™é‡Œæä¸€ä¸‹è‡ªç„¶æ•°çš„çš®äºšè¯ºæ„é€ ï¼Œä¸€ä¸ªè‡ªç„¶æ•°è¦ä¹ˆæ˜¯ 0 (ä¹Ÿå°±æ˜¯ä¸Šé¢çš„ Z ) è¦ä¹ˆæ˜¯æ¯”å®ƒå°ä¸€çš„è‡ªç„¶æ•° +1 (ä¹Ÿå°±æ˜¯ä¸Šé¢çš„ S ) ï¼Œä¾‹å¦‚3å¯ä»¥ç”¨ <code>new S(new S(new S(new Z))</code> æ¥è¡¨ç¤ºã€‚</p>
<p>å†æ¯”å¦‚é“¾è¡¨ï¼š</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">List</span>&lt;<span class="hljs-title">T</span>&gt; </span>{}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Nil</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">List</span>&lt;<span class="hljs-title">T</span>&gt; </span>{}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cons</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">List</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
    T value;
    List&lt;T&gt; next;
    
    Cons(T v, List&lt;T&gt; n) {
        value = v;
        next = n;
    }
}
</code></pre>
<p><code>[1, 3, 4]</code> å°±è¡¨ç¤ºä¸º <code>new Cons(1, new Cons(3, new Cons(4, new Nil)))</code></p>
<p>æ›´å¥‡å¦™çš„æ˜¯ä»£æ•°æ•°æ®ç±»å‹å¯¹åº”ç€æ•°æ®ç±»å‹å¯èƒ½çš„å®ä¾‹æ•°é‡ã€‚</p>
<p>å¾ˆæ˜¾ç„¶ç§¯ç±»å‹çš„å®ä¾‹æ•°é‡æ¥è‡ªå„ä¸ªå­—æ®µå¯èƒ½æƒ…å†µçš„ç»„åˆä¹Ÿå°±æ˜¯å„å­—æ®µå®ä¾‹æ•°é‡ç›¸ä¹˜ï¼Œè€Œå’Œç±»å‹çš„å®ä¾‹æ•°é‡å°±æ˜¯å„ç§å¯èƒ½ç±»å‹çš„å®ä¾‹æ•°é‡ä¹‹å’Œã€‚</p>
<p>æ¯”å¦‚ Bool çš„ç±»å‹æ˜¯ <code>1+1 </code>è€Œå…¶å®ä¾‹åªæœ‰ True å’Œ False ï¼Œè€Œ Nat çš„ç±»å‹æ˜¯ <code>1+1+1+...</code> å…¶ä¸­æ¯ä¸€ä¸ª1éƒ½ä»£è¡¨ä¸€ä¸ªè‡ªç„¶æ•°ï¼Œè‡³äº List çš„ç±»å‹å°±æ˜¯<code>1+x(1+x(...))</code> ä¹Ÿå°±æ˜¯ <code>1+x^2+x^3...</code> å…¶ä¸­ x å°±æ˜¯ List æ‰€å­˜å¯¹è±¡çš„å®ä¾‹æ•°é‡ã€‚</p>
<h2 id="å®é™…è¿ç”¨">å®é™…è¿ç”¨</h2>
<p>ADT æœ€é€‚åˆæ„é€ æ ‘çŠ¶çš„ç»“æ„ï¼Œæ¯”å¦‚è§£æ JSON å‡ºçš„ç»“æœéœ€è¦ä¸€ä¸ªèšåˆæ•°æ®ç»“æ„ã€‚</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">JsonValue</span> </span>{}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JsonBool</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">JsonValue</span> </span>{
    <span class="hljs-keyword">boolean</span> value;
}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JsonInt</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">JsonValue</span> </span>{
    <span class="hljs-keyword">int</span> value;
}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JsonString</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">JsonValue</span> </span>{
    String value;
}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JsonArray</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">JsonValue</span> </span>{
    List&lt;JsonValue&gt; value;
}
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JsonMap</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">JsonValue</span> </span>{
    Map&lt;String, JsonValue&gt; value;
}
</code></pre>
<blockquote>
<p>æ³¨1ï¼šä¸Šé¢çš„å’Œç±»å‹ä»£ç éƒ½å­˜åœ¨ç”¨æˆ·å¯èƒ½è‡ªå·±å†™ä¸€ä¸ªå­ç±»çš„é—®é¢˜ï¼Œæ›´å¥½çš„å†™æ³•åº”è¯¥ç”¨ Java 14 ä¸­çš„ sealed interface ä»£æ›¿åŸºç±»ã€‚</p>
<p>æ³¨2ï¼šä¸Šé¢çš„å†™æ³•æ˜¯åŸºäºå˜é‡éç©ºå‡è®¾çš„ï¼Œä¹Ÿå°±æ˜¯ä»£ç ä¸­ä¸ä¼šå‡ºç° null ï¼Œæ‰€æœ‰å˜é‡ä¹Ÿä¸ä¸º null ã€‚</p>
</blockquote>
</body>
</html>
