<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0">
<title>
ååˆ†é’Ÿé­”æ³•ç»ƒä¹ </title>
<style>
body { max-width: 650px; margin: auto; width: 90%; margin-top: 10%; margin-bottom: 10%; color: #0B0E26; background: #FAFAFC; line-height: 2em; }
body { font-family: -apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif; }
h1 { font-size: 2.5em; color: #EF96AB; line-height: 1.5em; }
h2 { margin-top: 2em; line-height: 1.5em; }
blockquote { color: gray; margin: 0; padding: 1 1 1 20; border-left: 5px solid #EF96AB; }
code, pre { font-family: Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace; background: #FCF6FC; }
pre { overflow-x: auto; padding: 10px; }
a { color: #02AEF1; text-decoration: none; }
@media (prefers-color-scheme: dark) { body { color: #D8D8D6; background: #0E0E10; } }
@media (prefers-color-scheme: dark) { pre, code { color: #D8D8D6; background: #0E0F1F; } }
.hljs-keyword { color: #F288AF; }
.hljs-comment { color: #929CA6; }
.hljs-string { color: #0594A6; }
.hljs-title { color: #4581D9 }
</style>
</head>
<body>
<p>
<a href="https://magic.huohuo.moe">ğŸ HomepageğŸ </a> | <a href="https://github.com/niltok/magic-in-ten-mins">â­Star me on GitHubâ­</a></p>
<h1 id="ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šä½™ä»£æ•°æ•°æ®ç±»å‹">ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šä½™ä»£æ•°æ•°æ®ç±»å‹</h1>
<h3 id="by-ã€Œç©ç«ã€">By ã€Œç©ç«ã€</h3>
<blockquote>
<p>å‰ç½®æŠ€èƒ½ï¼šJavaåŸºç¡€ï¼ŒADT</p>
</blockquote>
<h2 id="adt-çš„å±€é™æ€§">ADT çš„å±€é™æ€§</h2>
<p>å¾ˆæ˜¾ç„¶ï¼Œ ADT å¯ä»¥æ„é€ ä»»ä½•æ ‘å½¢çš„æ•°æ®ç»“æ„ï¼šæ ‘çš„èŠ‚ç‚¹å†…åˆ†æ”¯ç”¨å’Œç±»å‹è¿æ¥ï¼Œå±‚çº§é—´èŠ‚ç‚¹ç”¨ç§¯ç±»å‹è¿æ¥ã€‚</p>
<p>ä½†æ˜¯åŒæ ·å¾ˆæ˜¾ç„¶ ADT å¹¶ä¸èƒ½æå‡ºç¯å½¢çš„æ•°æ®ç»“æ„æˆ–è€…è¯´æ˜¯æ— ç©·å¤§å°çš„æ•°æ®ç»“æ„ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code class="language-java">IntList list = <span class="hljs-keyword">new</span> IntCons(<span class="hljs-number">1</span>, list);</code></pre>
<p>ç¼–è¯‘å™¨ä¼šè¡¨ç¤º <code>list</code> åœ¨ä½¿ç”¨æ—¶æœªåˆå§‹åŒ–ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ ADT æ˜¯å½’çº³æ„é€ çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¿…é¡»ä»éé€’å½’çš„åŸºæœ¬å…ƒç´ å¼€å§‹ç»„åˆæ„é€ æˆæ›´å¤§çš„å…ƒç´ ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å»æ‰è¿™äº›åŸºæœ¬å…ƒç´ é‚£å°±æ²¡æ³•å‡­ç©ºæ„é€ å¤§çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå»æ‰å½’çº³çš„ç¬¬ä¸€æ­¥é‚£æ•´ä¸ªå½’çº³è¿‡ç¨‹æ¯«æ— æ„ä¹‰ã€‚</p>
<h2 id="ä½™ä»£æ•°æ•°æ®ç±»å‹">ä½™ä»£æ•°æ•°æ®ç±»å‹</h2>
<p>ä½™ä»£æ•°æ•°æ®ç±»å‹ï¼ˆCoalgebraic Data Typeï¼‰ä¹Ÿå°±æ˜¯ä½™å½’çº³æ•°æ®ç±»å‹ï¼ˆCoinductive Data Typeï¼‰ï¼Œä»£è¡¨äº†è‡ªé¡¶å‘ä¸‹çš„æ•°æ®ç±»å‹æ„é€ æ€è·¯ï¼Œæ€è€ƒä¸€ä¸ªç±»å‹å¯ä»¥å¦‚ä½•è¢«åˆ†è§£ä»è€Œæ„é€ æ•°æ®ç±»å‹ã€‚</p>
<p>è¿™æ ·åœ¨åˆ†è§£è¿‡ç¨‹ä¸­å†æ¬¡ä½¿ç”¨è‡ªå·±è¿™ä¸ªæ•°æ®ç±»å‹æœ¬èº«å°±æ˜¯ä¸€ä»¶éå¸¸è‡ªç„¶çš„äº‹æƒ…äº†ã€‚</p>
<p>ä¸è¿‡åœ¨ç¼–ç¨‹å®ç°è¿‡ç¨‹ä¸­ä½¿ç”¨è‡ªå·±éœ€è¦åŠ ä¸ªæƒ°æ€§æ•°æ®ç»“æ„åŒ…è£¹ï¼Œé˜²æ­¢ç§¯ææ±‚å€¼çš„è¯­è¨€æ— é™é€’å½’ç”Ÿæˆæ•°æ®ã€‚</p>
<p>æ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨å¯ä»¥è¢«åˆ†è§£ä¸ºç¬¬ä¸€é¡¹å’Œå‰©ä½™çš„åˆ—è¡¨ï¼š</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InfIntList</span> </span>{
    <span class="hljs-keyword">int</span> head;
    Supplier&lt;InfIntList&gt; next;

    InfIntList(
        <span class="hljs-keyword">int</span> head, 
        Supplier&lt;InfIntList&gt; next
    ) {
        <span class="hljs-keyword">this</span>.head = head;
        <span class="hljs-keyword">this</span>.next = next;
    }
}</code></pre>
<p>è¿™é‡Œçš„ <code>Supplier</code> å¯ä»¥åšåˆ°ä»…åœ¨éœ€è¦ <code>next</code> çš„æ—¶å€™æ‰æ±‚å€¼ã€‚ä½¿ç”¨çš„ä¾‹å­å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Codata</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">static</span> InfIntList
    <span class="hljs-title">infAlt</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> InfIntList(<span class="hljs-number">1</span>, 
         () -&gt; <span class="hljs-keyword">new</span> InfIntList(<span class="hljs-number">2</span>, 
         Codata::infAlt));
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> 
    <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        System.out.println(
            infAlt().next.get().head);
    }
}</code></pre>
<p>è¿è¡Œä¼šè¾“å‡º <code>2</code> ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„ <code>infAlt</code> ä»æŸç§è§’åº¦æ¥çœ‹å®é™…ä¸Šå°±æ˜¯ä¸ªé•¿åº¦ä¸º 2 çš„ç¯å½¢ç»“æ„ã€‚</p>
<p>ç”¨è¿™æ ·çš„æ€è·¯å¯ä»¥æ„é€ å‡ºæ— é™å¤§çš„æ ‘ã€å¸¦ç¯çš„å›¾ç­‰æ•°æ®ç»“æ„ã€‚</p>
<p>ä¸è¿‡ä»¥ä¸Šéƒ½æ˜¯å¯¹ä½™ä»£æ•°æ•°æ®ç±»å‹çš„ä¸€ç§æ¨¡æ‹Ÿï¼Œå®é™…ä¸Šåœ¨å¯¹å…¶æ”¯æŒè‰¯å¥½çš„è¯­è¨€éƒ½ä¼šè‡ªåŠ¨åŠ ä¸Š <code>Supplier</code> æ¥è¾…åŠ©æ„é€ ï¼ŒåŒæ—¶è¿˜èƒ½å¤„ç†å¥½å¯¹æ— é™å¤§ï¼ˆå…¶å®æ˜¯ç¯ï¼‰çš„æ•°æ®ç»“æ„çš„æ— é™é€’å½’å˜æ¢ï¼ˆ<code>map</code>, <code>fold</code> ...ï¼‰çš„æ“ä½œã€‚</p>
</body>
</html>
