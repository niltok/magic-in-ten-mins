<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0">
<title>
ååˆ†é’Ÿé­”æ³•ç»ƒä¹ </title>
<style>
body { max-width: 650px; margin: auto; width: 90%; margin-top: 10%; margin-bottom: 10%; color: #0B0E26; background: #FAFAFC; line-height: 2em; }
body { font-family: -apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif; }
h1 { font-size: 2.5em; color: #EF96AB; line-height: 1.5em; }
h2 { margin-top: 2em; line-height: 1.5em; }
blockquote { color: gray; margin: 0; padding: 1 1 1 20; border-left: 5px solid #EF96AB; }
code, pre { font-family: "JetBrains Mono","ç­‰è·æ›´çº±é»‘ä½“ SC","Fira Code",Menlo,Monaco,source-code-pro,Courier New,Consolas,monospace; background: #FCF6FC; border-radius: 3px; padding-inline: 0.3rem; }
pre { overflow-x: auto; padding: 1rem; }
pre>code { padding-inline: 0; }
a { color: #02AEF1; text-decoration: none; }
@media (prefers-color-scheme: dark) { body { color: #D8D8D6; background: #0E0E10; } }
@media (prefers-color-scheme: dark) { pre, code { color: #D8D8D6; background: #0E0F1F; } }
.hljs-keyword { color: #F288AF; }
.hljs-comment { color: #929CA6; }
.hljs-string { color: #0594A6; }
.hljs-title { color: #4581D9; }
.hljs-type, .hljs-built_in { color: #fca311; }
</style>
</head>
<body>
<p>
<a href="https://magic.huohuo.moe">ğŸ HomepageğŸ </a> | <a href="https://github.com/niltok/magic-in-ten-mins">â­Star me on GitHubâ­</a></p>
<h1 id="ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šè¡¨é©±åŠ¨ç¼–ç¨‹">ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šè¡¨é©±åŠ¨ç¼–ç¨‹</h1>
<h3 id="by-ã€Œç©ç«ã€">By ã€Œç©ç«ã€</h3>
<blockquote>
<p>å‰ç½®æŠ€èƒ½ï¼š ç®€å•JavaåŸºç¡€</p>
</blockquote>
<h2 id="intro">Intro</h2>
<p>è¡¨é©±åŠ¨ç¼–ç¨‹è¢«ç§°ä¸ºæ˜¯æ™®é€šç¨‹åºå‘˜å’Œé«˜çº§ç¨‹åºå‘˜çš„åˆ†æ°´å²­ï¼Œè€Œå®ƒæœ¬èº«å¹¶æ²¡æœ‰é‚£ä¹ˆéš¾ï¼Œç”šè‡³å¾ˆå¤šæ—¶å€™ä¸çŸ¥é“çš„äººä¹Ÿèƒ½å¸¸å¸¸é‡æ–°å‘æ˜å®ƒã€‚è€Œå®ƒæœ¬èº«åœ¨æˆ‘çœ‹æ¥æ˜¯é”»ç‚¼æŠ½è±¡æ€ç»´çš„æœ€ä½³é€”å¾„ï¼Œå‡ ä¹æ‰€æœ‰å¤æ‚çš„ç³»ç»Ÿéƒ½èƒ½åˆ©ç”¨è¡¨é©±åŠ¨æ³•æ¥è¿›è¡Œè¿›ä¸€æ­¥æŠ½è±¡ä¼˜åŒ–ï¼Œè€Œè¿™ä¹Ÿéå¸¸è€ƒéªŒç¨‹åºå‘˜çš„æ°´å¹³ã€‚</p>
<h2 id="æ•°æ®è¡¨">æ•°æ®è¡¨</h2>
<p>å­¦ç¼–ç¨‹æœ€å¼€å§‹æ€»ä¼šé‡åˆ°è¿™æ ·çš„ç»å…¸ä¹ é¢˜ï¼š</p>
<blockquote>
<p>è¾“å…¥æˆç»©ï¼Œè¿”å›ç­‰ç¬¬ï¼Œ 90 ä»¥ä¸Š A ï¼Œ 80 ä»¥ä¸Š B ï¼Œ 70 ä»¥ä¸Š C ï¼Œ 60 ä»¥ä¸Š D ï¼Œå¦åˆ™ä¸º E</p>
</blockquote>
<p>ä½œä¸ºä¸€é“è€ƒå¯Ÿ <code>if</code> è¯­å¥çš„ä¹ é¢˜åˆå­¦è€…æ€»æ˜¯ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç ï¼š</p>
<pre><code class="language-java"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span> <span class="hljs-title">getLevel</span><span class="hljs-params">(<span class="hljs-keyword">int</span> s)</span> </span>{
    <span class="hljs-keyword">if</span> (s &gt;= <span class="hljs-number">90</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;A&#x27;</span>;
    <span class="hljs-keyword">if</span> (s &gt;= <span class="hljs-number">80</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;B&#x27;</span>;
    <span class="hljs-keyword">if</span> (s &gt;= <span class="hljs-number">70</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;C&#x27;</span>;
    <span class="hljs-keyword">if</span> (s &gt;= <span class="hljs-number">60</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;D&#x27;</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;E&#x27;</span>;
}
</code></pre>
<p>ç­‰å­¦äº† <code>switch</code> è¯­å¥ä»¥åæœ‰äº›èªæ˜çš„äººä¼šæŠŠå®ƒæ”¹æˆ <code>switch(s/10)</code> çš„å†™æ³•ã€‚</p>
<p>ä½†æ˜¯è¿™ä¸¤ç§å†™æ³•éƒ½æœ‰ä¸ªåŒæ ·çš„é—®é¢˜ï¼šå¦‚æœéœ€è¦ä¸æ–­æ·»åŠ ç­‰ç¬¬ä¸ªæ•°é‚£æœ€ç»ˆ <code>getLevel</code> å‡½æ•°å°±ä¼šå˜å¾—å¾ˆé•¿å¾ˆé•¿ï¼Œæœ€ç»ˆå˜å¾—ä¸å¯ç»´æŠ¤ã€‚</p>
<p>å­¦ä¼šå¾ªç¯å’Œæ•°ç»„åä¼šæœ‰èªæ˜äººå›å¤´å†çœ‹è¿™ä¸ªç¨‹åºï¼Œä¼šå‘ç°è¿™ä¸ªç¨‹åºç”±åå¤çš„</p>
<pre><code class="language-java"><span class="hljs-keyword">if</span> (s &gt;= _) <span class="hljs-keyword">return</span> _;
</code></pre>
<p>æ„æˆï¼Œå¯ä»¥æ”¹æˆå¾ªç¯ç»“æ„ï¼ŒæŠŠå¯¹åº”çš„æ•°æ®å¡è¿›æ•°ç»„ï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>[]  score = 
    {<span class="hljs-number">90</span>, <span class="hljs-number">80</span>, <span class="hljs-number">70</span>, <span class="hljs-number">60</span>};
<span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span>[] level = 
    {<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>, <span class="hljs-string">&#x27;D&#x27;</span>, <span class="hljs-string">&#x27;E&#x27;</span>};
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">char</span> <span class="hljs-title">getLeve</span><span class="hljs-params">(<span class="hljs-keyword">int</span> s)</span> </span>{
    <span class="hljs-keyword">int</span> pos = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (; pos &lt; score.length
            &amp;&amp; s &lt; score[pos];
         pos++);
    <span class="hljs-keyword">return</span> level[pos];
}
</code></pre>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯åªéœ€è¦åœ¨ä¸¤ä¸ªæ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå€¼å°±èƒ½åŠ ä¸€ç»„ç­‰ç¬¬è€Œä¸éœ€è¦ç¢° <code>getLevel</code> çš„é€»è¾‘ä»£ç ã€‚</p>
<p>è€Œä¸”è¿›ä¸€æ­¥è®²ï¼Œ <code>score</code> å’Œ <code>level</code> æ•°ç»„å¯ä»¥è¢«å­˜åœ¨å¤–éƒ¨æ–‡ä»¶ä¸­ä½œä¸ºé…ç½®æ–‡ä»¶ï¼Œä¸æºä»£ç åˆ†ç¦»ï¼Œè¿™æ ·ä¸ç”¨é‡æ–°ç¼–è¯‘å°±èƒ½è½»æ¾æ·»åŠ ä¸€ç»„ç­‰ç¬¬ã€‚</p>
<p>è¿™å°±æ˜¯è¡¨é©±åŠ¨ç¼–ç¨‹æœ€åˆé˜¶çš„å½¢å¼ï¼Œé€šè¿‡æŠ½å–ç›¸ä¼¼çš„é€»è¾‘å¹¶æŠŠä¸åŒçš„æ•°æ®æ”¾å…¥è¡¨ä¸­æ¥é¿å…é€»è¾‘é‡å¤ï¼Œæé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>å†ä¸¾ä¸ªå¸¦ä¿®æ”¹çš„ä¾‹å­ï¼Œå†™ä¸€ä¸ªæœ‰ç‰¹å®šå•†å“çš„è´­ç‰©è½¦ï¼š</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShopList</span></span>{
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Item</span> </span>{
        String name;
        <span class="hljs-keyword">int</span> price;
        <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;
        Item(String name, <span class="hljs-keyword">int</span> price) {
            <span class="hljs-keyword">this</span>.name = name;
            <span class="hljs-keyword">this</span>.price = price;
        }
    }
    Item[] items = {
            <span class="hljs-keyword">new</span> Item(<span class="hljs-string">&quot;water&quot;</span>, <span class="hljs-number">1</span>),
            <span class="hljs-keyword">new</span> Item(<span class="hljs-string">&quot;cola&quot;</span> , <span class="hljs-number">2</span>),
            <span class="hljs-keyword">new</span> Item(<span class="hljs-string">&quot;choco&quot;</span>, <span class="hljs-number">5</span>)
    };
    <span class="hljs-function">ShopList <span class="hljs-title">buy</span><span class="hljs-params">(String name)</span> </span>{
        <span class="hljs-keyword">for</span> (Item x : items)
            <span class="hljs-keyword">if</span> (x.name.equals(name))
                x.count++;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> Arrays.stream(items)
                .map(x -&gt; 
                     x.name + <span class="hljs-string">&quot;($&quot;</span> + 
                     x.price + <span class="hljs-string">&quot;/per): &quot;</span> + 
                     x.count)
                .collect(Collectors
                         .joining(<span class="hljs-string">&quot;\n&quot;</span>));
    }
}
</code></pre>
<h2 id="é€»è¾‘è¡¨">é€»è¾‘è¡¨</h2>
<p>åˆå­¦è€…åœ¨å†™ä¹ é¢˜çš„æ—¶å€™è¿˜ä¼šç¢°åˆ°å¦ä¸€ç§æ²¡å•¥è§„å¾‹çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ï¼š</p>
<blockquote>
<p>ç”¨æˆ·è¾“å…¥ 0 æ—¶è´­ä¹° water ï¼Œè¾“å…¥ 1 æ—¶è´­ä¹° cola ï¼Œè¾“å…¥ 2 æ—¶æ‰“å°è´­ä¹°çš„æƒ…å†µï¼Œè¾“å…¥ 3 é€€å‡ºç³»ç»Ÿã€‚</p>
</blockquote>
<p>çœ‹ä¼¼æ²¡æœ‰å¯ä»¥æŠ½å–æ•°æ®çš„ç›¸ä¼¼é€»è¾‘ã€‚ä½†æ˜¯ç»†æƒ³ä¸€ä¸‹ï¼ŒçœŸçš„æ²¡æœ‰å…¬å…±é€»è¾‘å—ï¼Ÿå®é™…ä¸Šå…¬å…±çš„é€»è¾‘åœ¨äºè¿™äº›éƒ½æ˜¯åœ¨åŒä¸€ä¸ªç”¨æˆ·è¾“å…¥æƒ…å†µä¸‹è§¦å‘çš„äº‹ä»¶ï¼ŒåŒºåˆ«å°±åœ¨äºä¸åŒè¾“å…¥è§¦å‘çš„é€»è¾‘ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå…¶å®å¯ä»¥å°±æŠŠé€»è¾‘åˆ¶æˆè¡¨ï¼š</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleUI</span> </span>{
    ShopList list = <span class="hljs-keyword">new</span> ShopList();
    Runnable[] event = {
        () -&gt; list.buy(<span class="hljs-string">&quot;water&quot;</span>),
        () -&gt; list.buy(<span class="hljs-string">&quot;cola&quot;</span>),
        () -&gt; System.out.println(list),
        () -&gt; System.exit(<span class="hljs-number">0</span>)
    };
    <span class="hljs-keyword">int</span>[] index = {<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>};
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">runEvent</span><span class="hljs-params">(<span class="hljs-keyword">int</span> e)</span> </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; 
             i &lt; index.length; 
             i++)
            <span class="hljs-keyword">if</span> (index[i] == e) 
                event[i].run();
    }
}
</code></pre>
<p>è¿™æ ·å¦‚æœéœ€è¦æ·»åŠ ä¸€ä¸ªç”¨æˆ·è¾“å…¥æŒ‡ä»¤åªéœ€è¦åœ¨ <code>event</code> è¡¨å’Œ <code>index</code> è¡¨ä¸­æ·»åŠ å¯¹åº”é€»è¾‘å’Œç´¢å¼•ï¼Œä¿®æ”¹ç”¨æˆ·çš„æŒ‡ä»¤å¯¹åº”çš„é€»è¾‘ä¹Ÿå˜å¾—éå¸¸æ–¹ä¾¿ï¼Œç”šè‡³å¯ä»¥æŠŠç”¨æˆ·æŒ‡ä»¤å­˜åœ¨é…ç½®æ–‡ä»¶é‡Œæä¾›è‡ªå®šä¹‰ä¿®æ”¹ã€‚è¿™æ ·ç”¨æˆ·è¾“å…¥å’Œæ—¶é—´è§¦å‘ä¸¤ä¸ªé€»è¾‘å°±ä¸ä¼šä¸²åœ¨ä¸€èµ·ï¼Œç»´æŠ¤èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚</p>
<h2 id="è‡ªåŠ¨æœº">è‡ªåŠ¨æœº</h2>
<p>å¦‚æœå†åŠ ä¸ªé€»è¾‘è¡¨èƒ½ä¿®æ”¹çš„è·³è½¬çŠ¶æ€å°±æ„æˆäº†è‡ªåŠ¨æœºï¼ˆAutomatonï¼‰ã€‚è¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼Œåˆ©ç”¨è‡ªåŠ¨æœºå®ç°äº†ä¸€ä¸ªå¤æ‚çš„ UI ï¼Œåœ¨ <code>menu</code> ç•Œé¢å¯ä»¥é€‰æ‹©å¼€å§‹ç©æˆ–è€…é€€å‡ºï¼Œåœ¨ <code>move</code> ç•Œé¢å¯ä»¥é€‰æ‹©ç§»åŠ¨æˆ–è€…æ‰“å°ä½ç½®æˆ–è€…è¿”å› <code>menu</code> ç•Œé¢ï¼š</p>
<pre><code class="language-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ComplexUI</span> </span>{
    <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Jumper</span> </span>{
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">jump</span><span class="hljs-params">(<span class="hljs-keyword">char</span> c)</span></span>;
    }

    <span class="hljs-comment">// ç•Œé¢ç»˜åˆ¶</span>
    Runnable[] draw = {
        () -&gt; { <span class="hljs-comment">/* draw menu */</span> },
        () -&gt; { <span class="hljs-comment">/* draw play */</span> }
    };

    Jumper[] jumpers = {
        <span class="hljs-keyword">this</span>::menu,
        <span class="hljs-keyword">this</span>::move
    };
    
    <span class="hljs-keyword">int</span> state;
    <span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CharEvent</span> </span>{
        <span class="hljs-keyword">char</span> c;
        Runnable e;
        CharEvent(<span class="hljs-keyword">char</span> c, Runnable e) {
            <span class="hljs-keyword">this</span>.c = c;
            <span class="hljs-keyword">this</span>.e = e;
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">menu</span><span class="hljs-params">(<span class="hljs-keyword">char</span> c)</span> </span>{
        CharEvent[] events = {
            <span class="hljs-keyword">new</span> CharEvent(<span class="hljs-string">&#x27;p&#x27;</span>, () -&gt; 
                jumpTo(<span class="hljs-number">1</span>)),
            <span class="hljs-keyword">new</span> CharEvent(<span class="hljs-string">&#x27;q&#x27;</span>, () -&gt;
                System.exit(<span class="hljs-number">0</span>))
        };
        <span class="hljs-keyword">for</span> (CharEvent i : events)
            <span class="hljs-keyword">if</span> (i.c == c) i.e.run();
    }

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">move</span><span class="hljs-params">(<span class="hljs-keyword">char</span> c)</span> </span>{
        CharEvent[] events = {
            <span class="hljs-keyword">new</span> CharEvent(<span class="hljs-string">&#x27;w&#x27;</span>, () -&gt; y++),
            <span class="hljs-keyword">new</span> CharEvent(<span class="hljs-string">&#x27;s&#x27;</span>, () -&gt; y--),
            <span class="hljs-keyword">new</span> CharEvent(<span class="hljs-string">&#x27;d&#x27;</span>, () -&gt; x++),
            <span class="hljs-keyword">new</span> CharEvent(<span class="hljs-string">&#x27;a&#x27;</span>, () -&gt; x--),
            <span class="hljs-keyword">new</span> CharEvent(<span class="hljs-string">&#x27;e&#x27;</span>, () -&gt;
                System.out.println(
                    <span class="hljs-string">&quot;{x=&quot;</span> + x + 
                    <span class="hljs-string">&quot;;y=&quot;</span> + y + <span class="hljs-string">&quot;}&quot;</span>)),
            <span class="hljs-keyword">new</span> CharEvent(<span class="hljs-string">&#x27;q&#x27;</span>, () -&gt; 
                jumpTo(<span class="hljs-number">0</span>))
        };
        <span class="hljs-keyword">for</span> (CharEvent i : events)
            <span class="hljs-keyword">if</span> (i.c == c) i.e.run();
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">jumpTo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> s)</span> </span>{
        state = s;
        draw[state].run();
    }

    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">runEvent</span><span class="hljs-params">(<span class="hljs-keyword">char</span> c)</span> </span>{
        jumpers[state].jump(c);
    }

    {
        jumpTo(<span class="hljs-number">0</span>);
    }
}
</code></pre>
<p>å®é™…ä¸Šæ›´æ ‡å‡†çš„å†™æ³•åº”è¯¥æŠŠçŠ¶æ€è®¾å®šæˆæšä¸¾ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºçš„ç®€å•æœŸé—´å¹¶æ²¡æœ‰é‚£æ ·å†™ã€‚</p>
<p>åŒæ—¶æ¨èä¸ç”¨ä¸‹æ ‡ä½œä¸ºè¡¨çš„ç´¢å¼•æ ‡ç­¾ï¼Œå¹¶æ€»æ˜¯æŠŠæ‰€æœ‰ç›¸å…³çŠ¶æ€æ‰“åŒ…èµ·æ¥æ”¾åœ¨åŒä¸€ä¸ªç±»é‡Œé¢è€Œä¸æ˜¯ç”¨ä¸åŒæ•°ç»„çš„ç›¸åŒä¸‹æ ‡æ¥è®¿é—®ï¼Œè¿™æ ·å¯ä»¥æœ‰æ›´åŠ ç´§å‡‘çš„è¯­ä¹‰å’Œæ›´å¥½çš„ç¼“å­˜å‘½ä¸­ç‡ã€‚</p>
</body>
</html>
