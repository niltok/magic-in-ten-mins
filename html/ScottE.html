<!DOCTYPE html><html lang="zh-CN" prefix="og: https://ogp.me/ns#">
<head >
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title >
ååˆ†é’Ÿé­”æ³•ç»ƒä¹ </title>
<style >
@font-face {
    font-family: "subset body font";
    src: url("body.woff2") format("woff2");
}

@font-face {
    font-family: "subset code font";
    src: url("code.woff2") format("woff2");
}

@font-face {
    font-family: "subset emoji font";
    src: url("emoji.woff2") format("woff2");
}

body {
    max-width: 35em;
    margin: auto;
    width: 90%;
    margin-top: 10%;
    margin-bottom: 10%;
    color: #0B0E26;
    background: #FAFAFC;
    line-height: 1.75em;
    text-rendering: optimizeLegibility;
    text-align: justify;
}

html {
    scroll-behavior: smooth;
    font-size: calc(min(.35vw + 16px, 25px));
    font-family: "subset body font", "Source Han Serif SC", "Noto Serif SC", "Songti SC", SimSun, "AR PL Sungti", "subset emoji font", serif;
}

h1 {
    font-size: 2.5rem;
    color: #EF96AB;
    line-height: 1.5em;
}

h2 {
    margin-top: 2rem;
    line-height: 1.5em;
}

h1,
h2,
h3 {
    /* text-align: center; */
}

blockquote {
    color: gray;
    margin: 0;
    padding: 1px 0 1px 1.2em;
    border-left: .3em solid #EF96AB;
}

code,
pre {
    font-size: 0.9rem;
    line-height: 1.8em;
    font-family: "subset code font", "ç­‰è·æ›´çº±é»‘ä½“ SC", "JetBrains Mono", "Fira Code", Menlo, Monaco, source-code-pro, Courier New, Consolas, "subset emoji font", monospace;
    background: #FCF6FC;
    border-radius: 3px;
    padding-inline: 0.3em;
}

pre {
    overflow-x: auto;
    padding: 1em 1.5em;
}

pre>code {
    padding-inline: 0;
}

::-webkit-scrollbar,
.element::-webkit-scrollbar,
.element {
    /* opacity: 0.5; */
}

a {
    color: #02AEF1;
    text-decoration: none;
}

@media (prefers-color-scheme: dark) {
    body {
        color: #D8D8D6;
        background: #0E0E10;
    }
}

@media (prefers-color-scheme: dark) {

    pre,
    code {
        color: #D8D8D6;
        background: #0E0F1F;
    }
}

.hljs-keyword {
    color: #F288AF;
}

.hljs-comment {
    color: #929CA6;
}

.hljs-string {
    color: #0594A6;
}

.hljs-title {
    color: #4581D9;
}

.hljs-type,
.hljs-built_in {
    color: #fca311;
}</style>
</head>
<body >
<p >
<a href="https://magic.huohuo.moe">ğŸ HomepageğŸ </a> | <a href="https://github.com/niltok/magic-in-ten-mins">â­Star me on GitHubâ­</a></p>
<h1 id="ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šæ–¯ç§‘ç‰¹ç¼–ç ">ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šæ–¯ç§‘ç‰¹ç¼–ç </h1>
<h3 id="by-ã€Œç©ç«ã€">By ã€Œç©ç«ã€</h3>
<blockquote>
<p>å‰ç½®æŠ€èƒ½ï¼šæ„é€ æ¼”ç®—ï¼Œ ADT ï¼ŒÎ¼</p>
</blockquote>
<p>æ–¯ç§‘ç‰¹ç¼–ç ï¼ˆScott Encodingï¼‰å¯ä»¥åœ¨ Î» æ¼”ç®—ä¸Šç¼–ç  ADT ã€‚å…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯åˆ©ç”¨è§£æ„å‡½æ•°æ¥å¤„ç†å’Œç±»å‹ä¸åŒçš„åˆ†æ”¯ï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹ç±»å‹ï¼š</p>
<pre><code>Either<span class="hljs-attribute">&lt;A, B&gt;</span> = Left<span class="hljs-attribute">&lt;A&gt;</span> + Right<span class="hljs-attribute">&lt;B&gt;</span>
</code></pre>
<p>åœ¨æ„é€ æ¼”ç®—ä¸­æ‹¥æœ‰ç±»å‹ï¼š</p>
<pre><code>Either = Î» A: *. Î» B: *. <span class="hljs-comment">(C: *)</span> â†’ <span class="hljs-comment">(A â†’ C)</span> â†’ <span class="hljs-comment">(B â†’ C)</span> â†’ C
</code></pre>
<p>å®ƒæ¥å—ä¸¤ä¸ªè§£æ„å‡½æ•°ï¼Œåˆ†åˆ«ç”¨æ¥å¤„ç† Left åˆ†æ”¯å’Œ Right åˆ†æ”¯ç„¶åè¿”å›å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯çš„å¤„ç†ç»“æœã€‚å¯ä»¥æŒ‰ç…§è¿™ä¸ªç±»å‹ç­¾åæ„é€ å‡ºä»¥ä¸‹ä¸¤ä¸ªç±»å‹æ„é€ å™¨ï¼š</p>
<pre><code><span class="hljs-string">Left</span>  <span class="hljs-string">=</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">A:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">B:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">val:</span> <span class="hljs-string">A.</span> <span class="hljs-string">(Î»</span> <span class="hljs-attr">C:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">l:</span> <span class="hljs-string">A</span> <span class="hljs-string">â†’</span> <span class="hljs-string">C.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">r:</span> <span class="hljs-string">B</span> <span class="hljs-string">â†’</span> <span class="hljs-string">C.</span> <span class="hljs-string">l</span> <span class="hljs-string">val)</span>
<span class="hljs-string">Right</span> <span class="hljs-string">=</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">A:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">B:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">val:</span> <span class="hljs-string">B.</span> <span class="hljs-string">(Î»</span> <span class="hljs-attr">C:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">l:</span> <span class="hljs-string">A</span> <span class="hljs-string">â†’</span> <span class="hljs-string">C.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">r:</span> <span class="hljs-string">B</span> <span class="hljs-string">â†’</span> <span class="hljs-string">C.</span> <span class="hljs-string">r</span> <span class="hljs-string">val)</span>
</code></pre>
<p>ä¹ä¸€çœ‹æŒºå¤æ‚çš„ï¼Œä¸è¿‡ä¸¤ä¸ªæ„é€ å™¨å…·æœ‰éå¸¸ç›¸ä¼¼çš„ç»“æ„ï¼ŒåŒºåˆ«ä»…ä»…æ˜¯ <code>val</code> çš„ç±»å‹å’Œæœ€å†…ä¾§è°ƒç”¨çš„å‡½æ•°ã€‚å®é™…ä¸Šæ„é€ ä¸€ä¸ª <code>Left</code> çš„å€¼æ—¶å…ˆå¡«å…¥å¯¹åº” <code>Either</code> çš„ç±»å‹å‚æ•°ç„¶åå†å¡«å…¥å‚¨å­˜çš„å€¼å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªç¬¦åˆ <code>Either</code> ç±»å‹ç­¾åçš„å®ä¾‹ï¼Œè§£æ„æ—¶å¡«å…¥ä¸åŒåˆ†æ”¯çš„è§£æ„å‡½æ•°å°±ä¸€å®šä¼šå¾—åˆ° <code>Left</code> åˆ†æ”¯è§£æ„å‡½æ•°å¤„ç†çš„ç»“æœã€‚</p>
<p>å†ä¸¾ä¸ª <code>List</code> çš„ä¾‹å­ï¼š</p>
<pre><code><span class="hljs-string">List</span> <span class="hljs-string">=</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">T:</span> <span class="hljs-string">*.</span> <span class="hljs-string">(Î¼</span> <span class="hljs-attr">L:</span> <span class="hljs-string">*.</span> <span class="hljs-string">(R:</span> <span class="hljs-string">*)</span> <span class="hljs-string">â†’</span> <span class="hljs-string">R</span> <span class="hljs-string">â†’</span> <span class="hljs-string">(T</span> <span class="hljs-string">â†’</span> <span class="hljs-string">L</span> <span class="hljs-string">â†’</span> <span class="hljs-string">R)</span> <span class="hljs-string">â†’</span> <span class="hljs-string">R)</span>

<span class="hljs-string">Nil</span>  <span class="hljs-string">=</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">T:</span> <span class="hljs-string">*.</span> <span class="hljs-string">(Î»</span> <span class="hljs-attr">R:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">nil:</span> <span class="hljs-string">R.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">cons:</span> <span class="hljs-string">T</span> <span class="hljs-string">â†’</span> <span class="hljs-string">List</span> <span class="hljs-string">T</span> <span class="hljs-string">â†’</span> <span class="hljs-string">R.</span> <span class="hljs-string">nil)</span>
<span class="hljs-string">Cons</span> <span class="hljs-string">=</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">T:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">val:</span> <span class="hljs-string">T.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">next:</span> <span class="hljs-string">List</span> <span class="hljs-string">T.</span> 
    <span class="hljs-string">(Î»</span> <span class="hljs-attr">R:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">nil:</span> <span class="hljs-string">R.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">cons:</span> <span class="hljs-string">T</span> <span class="hljs-string">â†’</span> <span class="hljs-string">List</span> <span class="hljs-string">T</span> <span class="hljs-string">â†’</span> <span class="hljs-string">T.</span> <span class="hljs-string">cons</span> <span class="hljs-string">val</span> <span class="hljs-string">next)</span>

<span class="hljs-string">map</span> <span class="hljs-string">=</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">A:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">B:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">f:</span> <span class="hljs-string">A</span> <span class="hljs-string">â†’</span> <span class="hljs-string">B.</span> <span class="hljs-string">Î¼</span> <span class="hljs-attr">m:</span> <span class="hljs-string">List</span> <span class="hljs-string">A</span> <span class="hljs-string">â†’</span> <span class="hljs-string">List</span> <span class="hljs-string">B.</span>
    <span class="hljs-string">Î»</span> <span class="hljs-attr">list:</span> <span class="hljs-string">List</span> <span class="hljs-string">A.</span> 
    <span class="hljs-string">list</span> <span class="hljs-string">(List</span> <span class="hljs-string">B)</span>
    <span class="hljs-string">(Nil</span> <span class="hljs-string">B)</span>
    <span class="hljs-string">(Î»</span> <span class="hljs-attr">x:</span> <span class="hljs-string">A.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">xs:</span> <span class="hljs-string">List</span> <span class="hljs-string">A.</span> <span class="hljs-string">Cons</span> <span class="hljs-string">B</span> <span class="hljs-string">(f</span> <span class="hljs-string">x)</span> <span class="hljs-string">(m</span> <span class="hljs-string">xs))</span>
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç§¯ç±»å‹ <code>A * B * ... * Z</code> ä¼šè¢«ç¿»è¯‘ä¸º</p>
<pre><code><span class="hljs-comment">(A: *)</span> â†’ <span class="hljs-comment">(B: *)</span> â†’ ... â†’ <span class="hljs-comment">(Z: *)</span> â†’
    <span class="hljs-comment">(Res: *)</span> â†’ <span class="hljs-comment">(A â†’ B â†’ ... â†’ Z â†’ Res)</span> â†’ Res
</code></pre>
<p>å’Œç±»å‹ <code>A + B + ... + Z</code> ä¼šè¢«ç¿»è¯‘ä¸º</p>
<pre><code><span class="hljs-comment">(A: *)</span> â†’ <span class="hljs-comment">(B: *)</span> â†’ ... â†’ <span class="hljs-comment">(Z: *)</span> â†’
    <span class="hljs-comment">(Res: *)</span> â†’ <span class="hljs-comment">(A â†’ Res)</span> â†’ <span class="hljs-comment">(B â†’ Res)</span> â†’ ... â†’ <span class="hljs-comment">(Z â†’ Res)</span> â†’ Res
</code></pre>
<p>å¹¶ä¸”ä¸¤è€…å¯ä»¥äº’ç›¸åµŒå¥—ä»è€Œæ„æˆå¤æ‚çš„ç±»å‹ã€‚</p>
<p>å¦‚æœç»™å’Œç±»å‹çš„æ¯ä¸ªåˆ†æ”¯å–ä¸ªåå­—ï¼Œå¹¶ä¸”å…è®¸åœ¨è§£æ„è°ƒç”¨çš„æ—¶å€™æŒ‰ç…§åå­—ç´¢å¼•ï¼Œéšæ„æ”¹å˜åˆ†æ”¯é¡ºåºï¼Œåœ¨è§£ç³–é˜¶æ®µæŠŠè§£æ„å‡½æ•°è°ƒæ•´æˆæ­£ç¡®çš„é¡ºåºé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°å¾ˆå¤šå‡½æ•°å¼è¯­è¨€é‡Œé¢çš„æ¨¡å¼åŒ¹é…ï¼ˆPattern matchï¼‰ã€‚ç„¶åå°±å¯ä»¥åƒè¿™æ ·è¡¨ç¤º <code>List</code> ï¼š</p>
<pre><code><span class="hljs-built_in">type</span> Li<span class="hljs-symbol">st:</span> * â†’ * 
| <span class="hljs-built_in">N</span><span class="hljs-symbol">il:</span> (<span class="hljs-symbol">T:</span> *) â†’ List <span class="hljs-built_in">T</span>
| Co<span class="hljs-symbol">ns:</span> (<span class="hljs-symbol">T:</span> *) â†’ <span class="hljs-built_in">T</span> â†’ List <span class="hljs-built_in">T</span> â†’ List <span class="hljs-built_in">T</span>
</code></pre>
<p>è§£ç³–çš„æ—¶å€™åˆ©ç”¨ç±»å‹ç­¾åå¯ä»¥é‡å»ºæ„é€ å‡½æ•°ã€‚åƒè¿™æ ·ä½¿ç”¨ <code>List</code> ï¼š</p>
<pre><code><span class="hljs-string">map</span> <span class="hljs-string">=</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">A:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">B:</span> <span class="hljs-string">*.</span> <span class="hljs-string">Î»</span> <span class="hljs-attr">f:</span> <span class="hljs-string">A</span> <span class="hljs-string">â†’</span> <span class="hljs-string">B.</span> <span class="hljs-string">Î¼</span> <span class="hljs-attr">m:</span> <span class="hljs-string">List</span> <span class="hljs-string">A</span> <span class="hljs-string">â†’</span> <span class="hljs-string">List</span> <span class="hljs-string">B.</span> 
    <span class="hljs-string">Î»</span> <span class="hljs-attr">list:</span> <span class="hljs-string">List</span> <span class="hljs-string">A.</span> 
    <span class="hljs-string">match</span> <span class="hljs-string">list</span> <span class="hljs-string">(List</span> <span class="hljs-string">B)</span>
    <span class="hljs-string">|</span> <span class="hljs-string">Cons</span> <span class="hljs-string">_</span> <span class="hljs-string">x</span> <span class="hljs-string">xs</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Cons</span> <span class="hljs-string">B</span> <span class="hljs-string">(f</span> <span class="hljs-string">x)</span> <span class="hljs-string">(m</span> <span class="hljs-string">xs)</span>
    <span class="hljs-string">|</span> <span class="hljs-string">Nil</span>  <span class="hljs-string">_</span>      <span class="hljs-string">â†’</span> <span class="hljs-string">Nil</span> <span class="hljs-string">B</span>
</code></pre>
</body>
</html>
