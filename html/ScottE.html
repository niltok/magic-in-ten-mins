<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0">
<title>
ååˆ†é’Ÿé­”æ³•ç»ƒä¹ </title>
<style>
body { max-width: 650px; margin: auto; width: 90%; margin-top: 10%; margin-bottom: 10%; color: #0B0E26; background: #FAFAFC; line-height: 2em; }
body { font-family: -apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif; }
h1 { font-size: 2.5em; color: #EF96AB; line-height: 1.5em; }
h2 { margin-top: 2em; line-height: 1.5em; }
blockquote { color: gray; margin: 0; padding: 1 1 1 20; border-left: 5px solid #EF96AB; }
code, pre { font-family: Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace; background: #FCF6FC; }
pre { overflow-x: auto; padding: 10px; }
a { color: #02AEF1; text-decoration: none; }
@media (prefers-color-scheme: dark) { body { color: #D8D8D6; background: #0E0E10; } }
@media (prefers-color-scheme: dark) { pre, code { color: #D8D8D6; background: #0E0F1F; } }
.hljs-keyword { color: #F288AF; }
.hljs-comment { color: #929CA6; }
.hljs-string { color: #0594A6; }
.hljs-title { color: #4581D9 }
</style>
</head>
<body>
<p>
<a href="https://magic.huohuo.moe">ğŸ HomepageğŸ </a> | <a href="https://github.com/niltok/magic-in-ten-mins">â­Star me on GitHubâ­</a></p>
<h1 id="ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šæ–¯ç§‘ç‰¹ç¼–ç ">ååˆ†é’Ÿé­”æ³•ç»ƒä¹ ï¼šæ–¯ç§‘ç‰¹ç¼–ç </h1>
<h3 id="by-ã€Œç©ç«ã€">By ã€Œç©ç«ã€</h3>
<blockquote>
<p>å‰ç½®æŠ€èƒ½ï¼šæ„é€ æ¼”ç®—ï¼Œ ADT ï¼ŒÎ¼</p>
</blockquote>
<p>æ–¯ç§‘ç‰¹ç¼–ç ï¼ˆScott Encodingï¼‰å¯ä»¥åœ¨ Î» æ¼”ç®—ä¸Šç¼–ç  ADT ã€‚å…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯åˆ©ç”¨è§£æ„å‡½æ•°æ¥å¤„ç†å’Œç±»å‹ä¸åŒçš„åˆ†æ”¯ï¼Œæ¯”å¦‚å¯¹äºå¦‚ä¸‹ç±»å‹ï¼š</p>
<pre><code>Either&lt;A, B&gt; = Left&lt;A&gt; + Right&lt;B&gt;</code></pre>
<p>åœ¨æ„é€ æ¼”ç®—ä¸­æ‹¥æœ‰ç±»å‹ï¼š</p>
<pre><code>Either = Î» A: *. Î» B: *. (C: *) â†’ (A â†’ C) â†’ (B â†’ C) â†’ C</code></pre>
<p>å®ƒæ¥å—ä¸¤ä¸ªè§£æ„å‡½æ•°ï¼Œåˆ†åˆ«ç”¨æ¥å¤„ç† Left åˆ†æ”¯å’Œ Right åˆ†æ”¯ç„¶åè¿”å›å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯çš„å¤„ç†ç»“æœã€‚å¯ä»¥æŒ‰ç…§è¿™ä¸ªç±»å‹ç­¾åæ„é€ å‡ºä»¥ä¸‹ä¸¤ä¸ªç±»å‹æ„é€ å™¨ï¼š</p>
<pre><code>Left  = Î» A: *. Î» B: *. Î» val: A. (Î» C: *. Î» l: A â†’ C. Î» r: B â†’ C. l val)
Right = Î» A: *. Î» B: *. Î» val: B. (Î» C: *. Î» l: A â†’ C. Î» r: B â†’ C. r val)</code></pre>
<p>ä¹ä¸€çœ‹æŒºå¤æ‚çš„ï¼Œä¸è¿‡ä¸¤ä¸ªæ„é€ å™¨å…·æœ‰éå¸¸ç›¸ä¼¼çš„ç»“æ„ï¼ŒåŒºåˆ«ä»…ä»…æ˜¯ <code>val</code> çš„ç±»å‹å’Œæœ€å†…ä¾§è°ƒç”¨çš„å‡½æ•°ã€‚å®é™…ä¸Šæ„é€ ä¸€ä¸ª <code>Left</code> çš„å€¼æ—¶å…ˆå¡«å…¥å¯¹åº” <code>Either</code> çš„ç±»å‹å‚æ•°ç„¶åå†å¡«å…¥å‚¨å­˜çš„å€¼å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªç¬¦åˆ <code>Either</code> ç±»å‹ç­¾åçš„å®ä¾‹ï¼Œè§£æ„æ—¶å¡«å…¥ä¸åŒåˆ†æ”¯çš„è§£æ„å‡½æ•°å°±ä¸€å®šä¼šå¾—åˆ° <code>Left</code> åˆ†æ”¯è§£æ„å‡½æ•°å¤„ç†çš„ç»“æœã€‚</p>
<p>å†ä¸¾ä¸ª <code>List</code> çš„ä¾‹å­ï¼š</p>
<pre><code>List = Î» T: *. (Î¼ L: *. (R: *) â†’ R â†’ (T â†’ L â†’ R) â†’ R)

Nil  = Î» T: *. (Î» R: *. Î» nil: R. Î» cons: T â†’ List T â†’ R. nil)
Cons = Î» T: *. Î» val: T. Î» next: List T. 
    (Î» R: *. Î» nil: R. Î» cons: T â†’ List T â†’ T. cons val next)

map = Î» A: *. Î» B: *. Î» f: A â†’ B. Î¼ m: List A â†’ List B.
    Î» list: List A. 
    list (List B)
    (Nil B)
    (Î» x: A. Î» xs: List A. Cons B (f x) (m xs))</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç§¯ç±»å‹ <code>A * B * ... * Z</code> ä¼šè¢«ç¿»è¯‘ä¸º</p>
<pre><code>(A: *) â†’ (B: *) â†’ ... â†’ (Z: *) â†’
    (Res: *) â†’ (A â†’ B â†’ ... â†’ Z â†’ Res) â†’ Res</code></pre>
<p>å’Œç±»å‹ <code>A + B + ... + Z</code> ä¼šè¢«ç¿»è¯‘ä¸º</p>
<pre><code>(A: *) â†’ (B: *) â†’ ... â†’ (Z: *) â†’
    (Res: *) â†’ (A â†’ Res) â†’ (B â†’ Res) â†’ ... â†’ (Z â†’ Res) â†’ Res</code></pre>
<p>å¹¶ä¸”ä¸¤è€…å¯ä»¥äº’ç›¸åµŒå¥—ä»è€Œæ„æˆå¤æ‚çš„ç±»å‹ã€‚</p>
<p>å¦‚æœç»™å’Œç±»å‹çš„æ¯ä¸ªåˆ†æ”¯å–ä¸ªåå­—ï¼Œå¹¶ä¸”å…è®¸åœ¨è§£æ„è°ƒç”¨çš„æ—¶å€™æŒ‰ç…§åå­—ç´¢å¼•ï¼Œéšæ„æ”¹å˜åˆ†æ”¯é¡ºåºï¼Œåœ¨è§£ç³–é˜¶æ®µæŠŠè§£æ„å‡½æ•°è°ƒæ•´æˆæ­£ç¡®çš„é¡ºåºé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°å¾ˆå¤šå‡½æ•°å¼è¯­è¨€é‡Œé¢çš„æ¨¡å¼åŒ¹é…ï¼ˆPattern matchï¼‰ã€‚ç„¶åå°±å¯ä»¥åƒè¿™æ ·è¡¨ç¤º <code>List</code> ï¼š</p>
<pre><code>type List: * â†’ * 
| Nil: (T: *) â†’ List T
| Cons: (T: *) â†’ T â†’ List T â†’ List T</code></pre>
<p>è§£ç³–çš„æ—¶å€™åˆ©ç”¨ç±»å‹ç­¾åå¯ä»¥é‡å»ºæ„é€ å‡½æ•°ã€‚åƒè¿™æ ·ä½¿ç”¨ <code>List</code> ï¼š</p>
<pre><code>map = Î» A: *. Î» B: *. Î» f: A â†’ B. Î¼ m: List A â†’ List B. 
    Î» list: List A. 
    match list (List B)
    | Cons _ x xs â†’ Cons B (f x) (m xs)
    | Nil  _      â†’ Nil B</code></pre>
</body>
</html>
